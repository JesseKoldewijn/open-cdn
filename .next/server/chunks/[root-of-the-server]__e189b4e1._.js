module.exports = {

"[project]/.next-internal/server/app/api/[...routes]/route/actions.js [app-rsc] (server actions loader, ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/path [external] (path, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}}),
"[externals]/os [external] (os, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/timers [external] (timers, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("timers", () => require("timers"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[externals]/string_decoder [external] (string_decoder, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("string_decoder", () => require("string_decoder"));

module.exports = mod;
}}),
"[externals]/process [external] (process, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("process", () => require("process"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/node:events [external] (node:events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:events", () => require("node:events"));

module.exports = mod;
}}),
"[project]/src/db/schema.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "files": (()=>files)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$indexes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/drizzle-orm@0.42.0_mysql2@3.14.0/node_modules/drizzle-orm/mysql-core/indexes.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$int$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/drizzle-orm@0.42.0_mysql2@3.14.0/node_modules/drizzle-orm/mysql-core/columns/int.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$table$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/drizzle-orm@0.42.0_mysql2@3.14.0/node_modules/drizzle-orm/mysql-core/table.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/drizzle-orm@0.42.0_mysql2@3.14.0/node_modules/drizzle-orm/mysql-core/columns/varchar.js [app-route] (ecmascript)");
;
const mySqlSchema = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$table$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mysqlTableCreator"])((name)=>`${name}_open-cdn`);
const files = mySqlSchema("files", {
    // file id
    id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$int$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["int"])("id").autoincrement().primaryKey(),
    // file name
    file_name: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("file_name", {
        length: 255
    }).notNull(),
    // file size in bytes
    byte_size: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$int$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["int"])("byte_size").notNull(),
    // file url
    remote_url: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("remote_url", {
        length: 255
    }).notNull(),
    // file hash
    file_hash: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("hash", {
        length: 255
    }).notNull(),
    // file mime type
    mime_type: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("mime_type", {
        length: 255
    }).notNull(),
    // file extension
    file_extension: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("file_extension", {
        length: 255
    }).notNull(),
    // file base64
    file_base64: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("file_base64", {
        length: 15000
    }).notNull(),
    // file width
    file_width: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$int$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["int"])("file_width").notNull(),
    // file height
    file_height: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$int$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["int"])("file_height").notNull(),
    // file quality
    file_quality: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$int$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["int"])("file_quality").notNull(),
    // file created at
    createdAt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$int$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["int"])("created_at").notNull()
}, (table)=>[
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$indexes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["index"])("id").on(table.id),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$indexes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["index"])("file_name").on(table.file_name),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$indexes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["index"])("file_hash").on(table.file_hash),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$indexes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["index"])("remote_url").on(table.remote_url)
    ]);
}}),
"[project]/src/db/connection.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "db": (()=>db)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$dotenv$40$16$2e$5$2e$0$2f$node_modules$2f$dotenv$2f$config$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/dotenv@16.5.0/node_modules/dotenv/config.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql2$2f$driver$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/drizzle-orm@0.42.0_mysql2@3.14.0/node_modules/drizzle-orm/mysql2/driver.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/schema.ts [app-route] (ecmascript)");
;
;
;
const db = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$mysql2$2f$driver$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["drizzle"])({
    connection: process.env.DATABASE_URL,
    casing: "snake_case",
    schema: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__,
    mode: "default"
});
}}),
"[externals]/sharp [external] (sharp, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("sharp", () => require("sharp"));

module.exports = mod;
}}),
"[project]/src/image/create-image-response.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "createImageResponse": (()=>createImageResponse)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$sharp__$5b$external$5d$__$28$sharp$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/sharp [external] (sharp, cjs)");
;
const createImageResponse = async ({ fileBuffer, filePath, imageOptions })=>{
    try {
        const { width, height, quality, format = "png" } = imageOptions;
        if (!fileBuffer) {
            return {
                error: "File not found",
                fileType: null,
                response: null
            };
        }
        const supportedFileTypes = {
            images: [
                "jpg",
                "jpeg",
                "png",
                "gif",
                "webp",
                "avif",
                "ico",
                "svg"
            ]
        };
        const fileType = fileBuffer?.byteLength ? filePath.toString().split(".").pop() ?? null : null;
        const isImageResponse = supportedFileTypes.images.includes(fileType ?? "");
        if (!isImageResponse) {
            return {
                error: "Unsupported file type",
                fileType: null,
                response: null
            };
        }
        const isIco = fileType === "ico";
        const sharpImage = !isIco ? (0, __TURBOPACK__imported__module__$5b$externals$5d2f$sharp__$5b$external$5d$__$28$sharp$2c$__cjs$29$__["default"])(fileBuffer) : {
            resize: ()=>sharpImage,
            toFormat: ()=>sharpImage,
            toBuffer: async ()=>({
                    data: Buffer.from(fileBuffer),
                    info: {
                        format: "ico"
                    }
                }),
            jpeg: ()=>sharpImage,
            png: ()=>sharpImage
        };
        if (width || height) {
            sharpImage.resize(width ? parseInt(width) : undefined, height ? parseInt(height) : undefined);
        }
        if (quality) {
            sharpImage.jpeg({
                quality: parseInt(quality)
            });
        }
        if (format !== null && format !== undefined) {
            sharpImage.toFormat(format);
        }
        const sharpImageToBuffer = await sharpImage.toBuffer({
            resolveWithObject: true
        });
        const { data: imageBuffer } = sharpImageToBuffer;
        const fileName = filePath.split("/").pop() ?? filePath;
        const response = new Response(imageBuffer, {
            headers: {
                "Content-Type": isImageResponse ? `image/${fileType}` : "application/octet-stream",
                "Content-Length": fileBuffer?.byteLength.toString() ?? "0",
                "Content-Disposition": `filename=${fileName}`
            },
            status: 200
        });
        return {
            error: null,
            fileType,
            response
        };
    } catch (error) {
        console.error("Error creating image response:", error);
        return {
            error: "Internal server error",
            fileType: null,
            response: null
        };
    }
};
}}),
"[project]/src/cache/utils.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "createCacheHash": (()=>createCacheHash)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/crypto [external] (crypto, cjs)");
;
const createCacheHash = (url)=>{
    const hasher = (input)=>(0, __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__["createHash"])("sha256").update(input).digest("hex");
    const forwardUrlHash = hasher(url);
    const reverseUrlHash = hasher(url.split("").reverse().join(""));
    return `${forwardUrlHash}:${reverseUrlHash}`;
};
}}),
"[project]/src/cache/get-cache.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "getFileCache": (()=>getFileCache)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$connection$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/connection.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$create$2d$image$2d$response$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/image/create-image-response.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/cache/utils.ts [app-route] (ecmascript)");
;
;
;
const getFileCache = async (url, imageOptions)=>{
    const { width, height, quality, format } = imageOptions;
    const cacheKey = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createCacheHash"])(`${url}_${width}_${height}_${quality}_${format}`);
    const cache = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$connection$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].query.files.findFirst({
        where: (files, { eq })=>eq(files.file_hash, cacheKey) && eq(files.remote_url, url)
    });
    if (cache) {
        const cachedResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$create$2d$image$2d$response$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createImageResponse"])({
            fileBuffer: Buffer.from(cache.file_base64, "base64"),
            filePath: cache.file_name,
            imageOptions: {
                width,
                height,
                quality,
                format
            }
        });
        if (cachedResponse.error) {
            return {
                error: cachedResponse.error,
                fileType: null,
                response: null
            };
        }
        if (!cachedResponse.fileType || !cachedResponse.response) {
            return {
                error: "File not found",
                fileType: null,
                response: null
            };
        }
        return {
            error: null,
            fileType: cachedResponse.fileType,
            response: cachedResponse.response
        };
    }
    return {
        error: "File not cached",
        fileType: null,
        response: null
    };
};
}}),
"[project]/src/cache/set-cache.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "setFileCache": (()=>setFileCache)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$connection$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/connection.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/schema.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/cache/utils.ts [app-route] (ecmascript)");
;
;
;
const setFileCache = async (fileBuffer, url, mimeType, imageOptions)=>{
    const { width, height, quality, format } = imageOptions;
    const cacheKey = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createCacheHash"])(`${url}_${width}_${height}_${quality}_${format}`);
    const safeParseToNumber = (value)=>{
        if (typeof value === "number") {
            return value;
        } else if (typeof value === "string") {
            const parsedValue = parseInt(value, 10);
            return isNaN(parsedValue) ? 100 : parsedValue;
        }
        return 100;
    };
    // Assuming you have a function to insert the cache into your database
    const insertedCache = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$connection$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].insert(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["files"]).values({
        file_name: url.split("/").pop() ?? "unknown",
        byte_size: fileBuffer.byteLength,
        remote_url: url,
        file_hash: cacheKey,
        mime_type: mimeType,
        file_extension: format ?? mimeType.split("/")[1],
        file_base64: fileBuffer.toString("base64"),
        file_width: safeParseToNumber(width ?? 100),
        file_height: safeParseToNumber(height ?? 100),
        file_quality: safeParseToNumber(quality ?? 100),
        createdAt: Math.floor(Date.now() / 1000)
    }).execute();
    if (insertedCache[0].affectedRows === 0) {
        return {
            error: "Failed to insert cache",
            fileType: null,
            response: null
        };
    }
    return insertedCache;
};
}}),
"[project]/src/file-path/get-file-buffer.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "getFileBufferFromUrl": (()=>getFileBufferFromUrl)
});
const getFileBufferFromUrl = async (url)=>{
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`Failed to fetch file from URL: ${response.statusText}`);
        }
        const arrayBuffer = await response.arrayBuffer();
        const buffer = Buffer.from(arrayBuffer);
        return buffer;
    } catch (error) {
        console.error("Error fetching file buffer:", error);
        return null;
    }
};
}}),
"[project]/src/file-path/get-url.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "getFileUrl": (()=>getFileUrl)
});
const getFileUrl = ({ proto, domain, tld, filepath })=>{
    try {
        return {
            url: new URL(`${proto}://${domain}.${tld}/${filepath}`),
            error: null
        };
    } catch (error) {
        console.error("Error creating URL:", error);
        return {
            url: null,
            error: "Invalid URL"
        };
    }
};
}}),
"[project]/src/image/get-image-params.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "getImageParams": (()=>getImageParams)
});
const getImageParams = (c)=>Object.keys(c).reduce((acc, key)=>{
        acc[key] = c[key];
        return acc;
    }, {});
}}),
"[project]/src/image/supported-file-types.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "findSupportedFileType": (()=>findSupportedFileType),
    "supportedFileTypes": (()=>supportedFileTypes),
    "supportedFileTypesRegexPattern": (()=>supportedFileTypesRegexPattern)
});
const supportedFileTypes = {
    images: [
        "jpg",
        "jpeg",
        "png",
        "gif",
        "webp",
        "avif",
        "ico",
        "svg"
    ]
};
const supportedFileTypesRegexPattern = Object.values(supportedFileTypes).map((type)=>type.join("|")).join("|");
const findSupportedFileType = (filePath)=>{
    // Extract the file extension from the file path
    const fileExtension = filePath.split(".").pop();
    if (!fileExtension) {
        return null;
    }
    // Check if the file extension is in the supported file types
    const isSupported = Object.values(supportedFileTypes).some((type)=>type.includes(fileExtension));
    return isSupported ? fileExtension : null;
};
}}),
"[project]/src/image/image-response-logic.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "returnImageResponseFromContext": (()=>returnImageResponseFromContext)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/drizzle-orm@0.42.0_mysql2@3.14.0/node_modules/drizzle-orm/sql/expressions/conditions.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$24$2e$3$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/zod@3.24.3/node_modules/zod/lib/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$get$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/cache/get-cache.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$set$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/cache/set-cache.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/cache/utils.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$connection$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/connection.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/schema.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$file$2d$path$2f$get$2d$file$2d$buffer$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/file-path/get-file-buffer.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$file$2d$path$2f$get$2d$url$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/file-path/get-url.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$create$2d$image$2d$response$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/image/create-image-response.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$get$2d$image$2d$params$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/image/get-image-params.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$supported$2d$file$2d$types$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/image/supported-file-types.ts [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
const getParams = (c, isDirectQuery)=>{
    const params = c.req.param();
    const searchParams = c.req.query();
    if (isDirectQuery) {
        const urlParam = searchParams["dq-url"];
        if (!urlParam) {
            return {
                error: "Invalid URL parameters",
                params: {
                    searchParams,
                    isDirectQuery
                }
            };
        }
        const url = new URL(urlParam);
        const dqPrefixedSearchParams = new URLSearchParams();
        for (const [key, value] of Object.entries(searchParams)){
            if (key !== "dq-url") {
                const unprefixedKey = key.replace(/^dq-/, "");
                dqPrefixedSearchParams.set(unprefixedKey, `${value}`);
            }
        }
        return {
            error: null,
            params: {
                ...params,
                proto: url.protocol.replace(":", ""),
                domain: url.hostname.split(".").slice(0, -1).join("."),
                tld: url.hostname.split(".").at(-1),
                filepath: url.pathname
            },
            searchParams: dqPrefixedSearchParams
        };
    }
    return {
        error: null,
        params,
        searchParams
    };
};
const returnImageResponseFromContext = async (c, logicOptions)=>{
    const { params, searchParams, error: paramsError } = getParams(c, logicOptions?.isDirectQuery);
    if (paramsError) {
        return c.json({
            error: paramsError,
            details: params
        }, {
            status: 400
        });
    }
    const paramValidator = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$24$2e$3$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
        proto: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$24$2e$3$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].enum([
            "http",
            "https"
        ]),
        domain: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$24$2e$3$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().min(1),
        tld: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$24$2e$3$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().min(2),
        filepath: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$24$2e$3$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string()
    });
    const validationResult = paramValidator.safeParse(params);
    if (!validationResult.success || !searchParams) {
        return c.json({
            error: "Invalid URL parameters",
            details: validationResult.error?.format(),
            input: params
        }, {
            status: 400
        });
    }
    const filePath = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$supported$2d$file$2d$types$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findSupportedFileType"])(validationResult.data.filepath);
    if (!filePath) {
        return c.json({
            error: "File type not supported or not defined"
        }, {
            status: 415
        });
    }
    const file = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$file$2d$path$2f$get$2d$url$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFileUrl"])(validationResult.data);
    if (file.error || !file.url) {
        return c.json({
            error: "File not found",
            details: file.error
        }, {
            status: 404
        });
    }
    const { width, height, quality, format } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$get$2d$image$2d$params$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getImageParams"])(searchParams);
    const cache = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$get$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFileCache"])(file.url.href.toString(), {
        width,
        height,
        quality,
        format
    });
    if (cache && cache.response !== null) {
        return cache.response;
    }
    const fileBuffer = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$file$2d$path$2f$get$2d$file$2d$buffer$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFileBufferFromUrl"])(file.url.href.toString());
    if (!fileBuffer || fileBuffer.byteLength === 0 || !filePath) {
        return c.json({
            error: "File not found",
            details: {
                file,
                msg: "File buffer is empty or undefined"
            }
        }, {
            status: 404
        });
    }
    const imageFileResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$create$2d$image$2d$response$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createImageResponse"])({
        fileBuffer,
        filePath: validationResult.data.filepath,
        imageOptions: {
            width,
            height,
            quality,
            format
        }
    });
    if (imageFileResponse.error) {
        return c.json({
            error: imageFileResponse.error
        }, {
            status: 500
        });
    }
    if (!imageFileResponse.fileType || !imageFileResponse.response) {
        return c.json({
            error: "File not found"
        }, {
            status: 404
        });
    }
    const fileHash = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createCacheHash"])(`${filePath}_${width}_${height}_${quality}_${format}`);
    const doesExist = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$connection$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["db"].selectDistinct().from(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["files"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$42$2e$0_mysql2$40$3$2e$14$2e$0$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["files"].file_hash, fileHash)).execute();
    if (doesExist.length === 0) {
        // only create cache if at this point there's no existing cache
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$cache$2f$set$2d$cache$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setFileCache"])(fileBuffer, file.url.href, imageFileResponse.fileType, {
            width,
            height,
            quality,
            format
        });
    }
    return imageFileResponse.response;
};
}}),
"[project]/src/utils/date-time/converts.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "DateTimeConverter": (()=>DateTimeConverter)
});
const _OFFSETS = {
    ms: 1,
    seconds: 1000,
    minutes: 1000 * 60,
    hours: 1000 * 60 * 60,
    days: 1000 * 60 * 60 * 24,
    weeks: 1000 * 60 * 60 * 24 * 7,
    months: 1000 * 60 * 60 * 24 * 30
};
class DateTimeConverter {
    static $__OFFSETS = _OFFSETS;
    static getOffsetByKey(key) {
        return this.$__OFFSETS[key];
    }
    static convertToMilliseconds(key, value) {
        const offset = this.getOffsetByKey(key);
        if (!offset) {
            throw new Error("Invalid time unit");
        }
        return value * offset;
    }
}
}}),
"[project]/src/app/api/[...routes]/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "GET": (()=>GET)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$3$2e$1_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@15.3.1_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$image$2d$response$2d$logic$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/image/image-response-logic.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$supported$2d$file$2d$types$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/image/supported-file-types.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$date$2d$time$2f$converts$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utils/date-time/converts.ts [app-route] (ecmascript)");
;
;
;
;
const GET = async (req)=>{
    const url = req.url;
    const pathname = new URL(url).pathname;
    let params = pathname.split("/").slice(1);
    const isDirectQuery = params[0] === "direct-query";
    if (isDirectQuery) {
        const searchParams = new URL(req.url).searchParams;
        const remoteUrl = searchParams.get("dq-url");
        if (!remoteUrl) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$3$2e$1_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Invalid URL parameters",
                details: {
                    remoteUrl
                }
            });
        }
        const url = new URL(remoteUrl);
        const proto = url.protocol.replace(":", "");
        const domain = url.hostname.split(".").slice(0, -1).join(".");
        const tld = url.hostname.split(".").at(-1);
        const filepath = url.pathname;
        const fileType = filepath.match(new RegExp(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$supported$2d$file$2d$types$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supportedFileTypesRegexPattern"]));
        if (!proto || !domain || !tld || !filepath || !fileType) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$3$2e$1_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Invalid URL parameters",
                details: {
                    proto,
                    domain,
                    tld,
                    filepath,
                    fileType
                }
            });
        }
        params[0] = proto;
        params[1] = domain;
        params[2] = tld;
        params[3] = filepath;
    }
    const proto = params[0];
    const domain = params[1];
    const tld = params[2];
    // filepath is any after tld
    const filepath = params.slice(3).join("/");
    const fileType = filepath.match(new RegExp(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$supported$2d$file$2d$types$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supportedFileTypesRegexPattern"]));
    if (!proto || !domain || !tld || !filepath || !fileType) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$3$2e$1_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Invalid URL parameters",
            details: {
                proto,
                domain,
                tld,
                filepath,
                fileType
            }
        });
    }
    const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$image$2f$image$2d$response$2d$logic$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["returnImageResponseFromContext"])({
        req: {
            param: ()=>({
                    proto,
                    domain,
                    tld,
                    filepath
                }),
            query: ()=>{
                const searchParams = new URL(req.url).searchParams;
                const params = {};
                for (const [key, value] of searchParams.entries()){
                    params[key] = value;
                }
                return params;
            }
        },
        json: (data)=>{
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$3$2e$1_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(data);
        }
    }, {
        isDirectQuery
    });
    response.headers.set("Cache-Control", `public, max-age=${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$date$2d$time$2f$converts$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DateTimeConverter"].convertToMilliseconds("days", 7)}, immutable`);
    response.headers.set("Vary", "Accept-Encoding");
    response.headers.set("Access-Control-Allow-Origin", "*");
    response.headers.set("Access-Control-Allow-Methods", "*");
    response.headers.set("Access-Control-Allow-Headers", "*");
    return response;
};
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__e189b4e1._.js.map